<!DOCTYPE html>
<html lang="pt">

<head>
  <style id="security-curtain">
    html, body {
      display: none !important;
      opacity: 0 !important;
      height: 100%;
      margin: 0;
      background-color: #ffffff;
    }
  </style>

  <style>
    /* CORREÇÃO: Marca d'água como plano de fundo fixo */
    #watermark {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1; /* Joga para trás de tudo para não quebrar o layout */
      opacity: 0.05;
      background-repeat: repeat;
      background-color: transparent;
    }

    @media print {
      #watermark {
        display: block !important;
        opacity: 0.12;
      }
    }
  </style>

  <script>
    (function() {
      var allowedHosts = ['luizpassaroni.com', 'luizpassaroni.github.io', 'localhost', '127.0.0.1'];
      var currentHost = window.location.hostname;
      var isAllowed = false;

      for (var i = 0; i < allowedHosts.length; i++) {
        if (currentHost.includes(allowedHosts[i])) {
          isAllowed = true;
          break;
        }
      }

      var isArchive = window.__wm || 
                      currentHost.includes('archive') || 
                      currentHost.includes('wayback') || 
                      currentHost.includes('googleusercontent');

      function injectWatermark(text) {
        const watermarkDiv = document.createElement('div');
        watermarkDiv.id = 'watermark';
        
        // SVG atualizado com o texto "Your IP"
        const svgString = `
          <svg xmlns='http://www.w3.org/2000/svg' width='250' height='200'>
            <text x='50%' y='50%' font-size='12' font-family='monospace' 
                  fill='black' text-anchor='middle' transform='rotate(-25 125,100)'>
              ${text}
            </text>
          </svg>`;
        
        watermarkDiv.style.backgroundImage = `url("data:image/svg+xml;base64,${btoa(svgString)}")`;
        document.body.prepend(watermarkDiv); // Insere no início do body
      }

      if (isAllowed && !isArchive) {
        document.addEventListener('DOMContentLoaded', function() {
          var curtain = document.getElementById('security-curtain');
          if (curtain) curtain.remove();
          
          document.body.style.display = 'block';
          document.body.style.opacity = '1';

          fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(data => {
              // MUDANÇA AQUI: Texto alterado para "Your IP"
              injectWatermark(`Your IP: ${data.ip}`);
            })
            .catch(() => {
              injectWatermark('Your IP: Protected');
            });
        });
      } else {
        // Lógica de bloqueio (mantida igual)
        try { window.stop(); } catch (e) {}
        window.addEventListener('load', function(){
            var curtain = document.getElementById('security-curtain');
            if (curtain) curtain.remove();
            document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;font-family:sans-serif;"><h1>Access Denied</h1></div>';
            document.body.style.display = 'block';
            document.body.style.opacity = '1';
        });
      }
    })();
  </script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <title>Dev Passaroni</title>
</head>

<body class="min-h-screen flex flex-col">
  <main class="flex-1 flex flex-col">
    <section class="mx-auto w-full max-w-2xl space-y-8 bg-white my-8 px-4">
      <header class="flex items-start md:items-center justify-between gap-4">
        <div class="flex-1 space-y-1.5">
          <h1 class="text-2xl font-bold">Luiz Felipe de Aguiar Passaroni</h1>
          <p class="max-w-md text-pretty font-mono text-sm text-gray-600">Estudante de Ciência da Computação | Intern @ Globo</p>
        </div>
        <span class="relative flex shrink-0 overflow-hidden rounded-full size-20 md:size-28">
          <img class="aspect-square h-full w-full" alt="Luiz Passaroni" src="perfil.jpeg">
        </span>
      </header>
      
      <section class="space-y-3">
        <h2 class="text-xl font-bold">Sobre</h2>
        <p class="font-mono text-sm text-gray-700">Atualmente curso o 5º semestre de Ciência da Computação na UVA e sou estagiário no time de iOS do Globoplay.</p>
      </section>
    </section>
  </main>
</body>
</html>
